@(subscribers: List[models.NewsletterSubscriber])(implicit request: RequestHeader, flash: Flash)

@admin.adminLayout("Newsletter") {
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.25rem; flex-wrap: wrap; gap: 0.75rem;">
        <h2 style="font-size: 1.125rem; font-weight: 700; color: #1a202c;">
            ðŸ“§ Suscriptores del Newsletter
        </h2>
        <span style="font-size: 0.8125rem; color: #64748b; font-weight: 600;">
            @{subscribers.count(_.isActive)} activos / @{subscribers.size} total
        </span>
    </div>

    @if(subscribers.isEmpty) {
        <div class="card" style="text-align: center; padding: 3rem;">
            <p style="color: #94a3b8; font-size: 0.875rem;">AÃºn no hay suscriptores.</p>
        </div>
    } else {
        <div class="card" style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; font-size: 0.875rem;">
                <thead>
                    <tr style="border-bottom: 2px solid #e2e8f0; text-align: left;">
                        <th style="padding: 0.75rem 1rem; color: #475569; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">#</th>
                        <th style="padding: 0.75rem 1rem; color: #475569; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">Email</th>
                        <th style="padding: 0.75rem 1rem; color: #475569; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">Fecha</th>
                        <th style="padding: 0.75rem 1rem; color: #475569; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">Estado</th>
                        <th style="padding: 0.75rem 1rem; color: #475569; font-weight: 700; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em;">IP</th>
                    </tr>
                </thead>
                <tbody>
                    @for((sub, idx) <- subscribers.zipWithIndex) {
                        <tr style="border-bottom: 1px solid #f1f5f9; @if(!sub.isActive){opacity: 0.5;}">
                            <td style="padding: 0.625rem 1rem; color: #94a3b8;">@{idx + 1}</td>
                            <td style="padding: 0.625rem 1rem; color: #1e293b; font-weight: 500;">@sub.email</td>
                            <td style="padding: 0.625rem 1rem; color: #64748b;">
                                @{
                                    val formatter = java.time.format.DateTimeFormatter.ofPattern("dd MMM yyyy HH:mm")
                                    sub.subscribedAt.atZone(java.time.ZoneId.systemDefault()).format(formatter)
                                }
                            </td>
                            <td style="padding: 0.625rem 1rem;">
                                @if(sub.isActive) {
                                    <span style="display: inline-block; padding: 0.1875rem 0.625rem; background: #dcfce7; color: #166534; border-radius: 10px; font-size: 0.75rem; font-weight: 600;">Activo</span>
                                } else {
                                    <span style="display: inline-block; padding: 0.1875rem 0.625rem; background: #fee2e2; color: #991b1b; border-radius: 10px; font-size: 0.75rem; font-weight: 600;">Inactivo</span>
                                }
                            </td>
                            <td style="padding: 0.625rem 1rem; color: #94a3b8; font-size: 0.8125rem; font-family: monospace;">
                                @sub.ipAddress.getOrElse("â€”")
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
}
