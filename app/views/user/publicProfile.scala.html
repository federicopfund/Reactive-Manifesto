@(user: models.User, publications: List[models.Publication], badges: List[models.UserBadge], totalReactions: Int, totalViews: Int)(implicit request: RequestHeader, messages: Messages)

@main(s"${user.fullName} - Perfil") {
    <section style="padding: 2.5rem 0; min-height: 80vh;">
        <div class="container" style="max-width: 900px; margin: 0 auto; padding: 0 1.5rem;">

            <!-- Profile Header -->
            <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 2rem; margin-bottom: 1.5rem; text-align: center;">
                <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #6b8caa, #89a7be); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 700; margin: 0 auto 1rem;">
                    @if(user.avatarUrl.nonEmpty) {
                        <img src="@user.avatarUrl" alt="@user.username" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover;">
                    } else {
                        @user.fullName.substring(0, 1).toUpperCase
                    }
                </div>
                <h1 style="font-size: 1.5rem; font-weight: 700; color: #1a202c; margin-bottom: 0.25rem;">@user.fullName</h1>
                <p style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.75rem;">@@@user.username</p>

                @if(user.bio.nonEmpty) {
                    <p style="font-size: 0.9375rem; color: #475569; max-width: 500px; margin: 0 auto 1rem; line-height: 1.6;">@user.bio</p>
                }

                <div style="display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; font-size: 0.8125rem; color: #64748b;">
                    @if(user.location.nonEmpty) {
                        <span>üìç @user.location</span>
                    }
                    @if(user.website.nonEmpty) {
                        <a href="@user.website" target="_blank" rel="noopener" style="color: #6b8caa; text-decoration: none;">üîó Sitio web</a>
                    }
                    <span>üìÖ Miembro desde @user.createdAt.toString.substring(0, 10)</span>
                </div>
            </div>

            <!-- Stats -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 0.75rem; margin-bottom: 1.5rem;">
                <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; text-align: center;">
                    <div style="font-size: 1.75rem; font-weight: 700; color: #1a202c;">@publications.size</div>
                    <div style="font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.04em;">Publicaciones</div>
                </div>
                <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; text-align: center;">
                    <div style="font-size: 1.75rem; font-weight: 700; color: #1a202c;">@totalViews</div>
                    <div style="font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.04em;">Vistas totales</div>
                </div>
                <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; text-align: center;">
                    <div style="font-size: 1.75rem; font-weight: 700; color: #1a202c;">@totalReactions</div>
                    <div style="font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.04em;">Reacciones</div>
                </div>
                <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 8px; padding: 1rem; text-align: center;">
                    <div style="font-size: 1.75rem; font-weight: 700; color: #1a202c;">@badges.size</div>
                    <div style="font-size: 0.75rem; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.04em;">Insignias</div>
                </div>
            </div>

            <!-- Badges -->
            @if(badges.nonEmpty) {
                <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <h2 style="font-size: 1rem; font-weight: 700; color: #1a202c; margin-bottom: 1rem;">üèÜ Insignias</h2>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.75rem;">
                        @for(badge <- badges) {
                            @defining(models.BadgeDefinition.get(badge.badgeKey)) { defnOpt =>
                                @defnOpt.map { defn =>
                                    <div style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 0.75rem 1rem; display: flex; align-items: center; gap: 0.5rem;" title="@defn.description ‚Äî @badge.awardedAt.toString.substring(0, 10)">
                                        <span style="font-size: 1.25rem;">@defn.icon</span>
                                        <div>
                                            <div style="font-size: 0.8125rem; font-weight: 600; color: #1a202c;">@defn.name</div>
                                            <div style="font-size: 0.6875rem; color: #94a3b8;">@defn.description</div>
                                        </div>
                                    </div>
                                }
                            }
                        }
                    </div>
                </div>
            }

            <!-- Publications -->
            <div style="background: #ffffff; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1.5rem;">
                <h2 style="font-size: 1rem; font-weight: 700; color: #1a202c; margin-bottom: 1rem;">üìö Publicaciones</h2>
                @if(publications.isEmpty) {
                    <p style="text-align: center; color: #94a3b8; font-size: 0.875rem; padding: 2rem 0;">Este usuario a√∫n no tiene publicaciones</p>
                } else {
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        @for(pub <- publications) {
                            <a href="@routes.HomeController.publicacion(pub.slug)" style="text-decoration: none; display: block; padding: 1rem; border: 1px solid #f1f5f9; border-radius: 8px; transition: all 0.15s;">
                                <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem;">
                                    <div style="flex: 1; min-width: 0;">
                                        <h3 style="font-size: 0.9375rem; font-weight: 600; color: #1a202c; margin-bottom: 0.25rem; word-break: break-word;">@pub.title</h3>
                                        <p style="font-size: 0.8125rem; color: #64748b; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; line-clamp: 2; -webkit-box-orient: vertical;">
                                            @pub.excerpt.getOrElse(pub.content.take(120) + "...")
                                        </p>
                                    </div>
                                    <div style="flex-shrink: 0; text-align: right;">
                                        <span style="background: #f1f5f9; color: #64748b; padding: 0.15rem 0.5rem; border-radius: 4px; font-size: 0.6875rem;">@pub.category</span>
                                        <div style="font-size: 0.6875rem; color: #94a3b8; margin-top: 0.375rem;">
                                            ~@{Math.max(1, pub.content.split("\\s+").length / 200)} min ¬∑ üëÅÔ∏è @pub.viewCount
                                        </div>
                                    </div>
                                </div>
                            </a>
                        }
                    </div>
                }
            </div>

            <div style="text-align: center; margin-top: 1.5rem;">
                <a href="@routes.HomeController.publicaciones()" style="color: #6b8caa; font-size: 0.875rem; text-decoration: none;">&larr; Volver a publicaciones</a>
            </div>
        </div>
    </section>
}
