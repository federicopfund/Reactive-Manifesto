# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Home page
GET     /                           controllers.HomeController.index()

# Debug endpoint: Listar todos los admins (JSON)
GET     /debug/admins               controllers.AdminController.listAllAdmins()

# Publicaciones page
GET     /publicaciones              controllers.HomeController.publicaciones()
GET     /publicaciones/buscar       controllers.HomeController.searchPublicaciones(q: String ?= "", category: Option[String] ?= None)
GET     /publicaciones/:slug        controllers.HomeController.publicacion(slug: String)

# Portafolio page
GET     /portafolio                 controllers.HomeController.portafolio()

# Legal pages
GET     /privacidad                 controllers.HomeController.politicaPrivacidad()
GET     /terminos                   controllers.HomeController.terminosDeUso()

# Contact form
POST    /contact                    controllers.HomeController.submitContact()

# Newsletter
POST    /newsletter/subscribe       controllers.HomeController.subscribeNewsletter()

# Admin endpoints (opcional - proteger en producci√≥n)
GET     /api/contacts               controllers.HomeController.listContacts(page: Int ?= 0)
GET     /api/contacts/stats         controllers.HomeController.contactStats()

# Authentication Routes (Users & Admins)
GET     /login                      controllers.AuthController.loginPage()
POST    /login                      controllers.AuthController.login()
GET     /register                   controllers.AuthController.registerPage()
POST    /register                   controllers.AuthController.register()
GET     /logout                     controllers.AuthController.logout()

# User Dashboard Routes
GET     /dashboard                  controllers.AuthController.userDashboard()
GET     /profile                    controllers.AuthController.userProfile()

# Email Verification Routes
GET     /verify-email/:userId       controllers.AuthController.verifyEmailPage(userId: Long)
POST    /verify-email               controllers.AuthController.verifyEmailCode()
GET     /resend-code/:userId        controllers.AuthController.resendVerificationCode(userId: Long)

# Admin Panel Routes (Legacy - mantener por compatibilidad)
GET     /admin/login                controllers.AdminController.loginPage()
POST    /admin/login                controllers.AdminController.login()
GET     /admin/logout               controllers.AdminController.logout()
GET     /admin                      controllers.AdminController.dashboard(page: Int ?= 0, search: Option[String] ?= None)
GET     /admin/dashboard            controllers.AdminController.dashboard(page: Int ?= 0, search: Option[String] ?= None)
GET     /admin/statistics           controllers.AdminController.statisticsPage()
GET     /admin/stats                controllers.AdminController.stats()
GET     /admin/stats/advanced       controllers.AdminController.advancedStats()
GET     /admin/stats/messaging      controllers.AdminController.messagingStats()

# Admin CRUD Operations
GET     /admin/contacts/new         controllers.AdminController.createContactPage()
POST    /admin/contacts/new         controllers.AdminController.createContact()
GET     /admin/contacts/:id         controllers.AdminController.viewContact(id: Long)
GET     /admin/contacts/:id/edit    controllers.AdminController.editContactPage(id: Long)
POST    /admin/contacts/:id/edit    controllers.AdminController.updateContact(id: Long)
POST    /admin/contacts/:id/delete  controllers.AdminController.deleteContact(id: Long)
POST    /admin/contacts/:id/status/:status  controllers.AdminController.updateStatus(id: Long, status: String)

# ============================================
# USER PUBLICATIONS ROUTES
# ============================================

# User Dashboard
GET     /user/dashboard             controllers.UserPublicationController.dashboard()

# Create Publications
GET     /user/publications/new      controllers.UserPublicationController.newPublicationForm()
POST    /user/publications/new      controllers.UserPublicationController.createPublication()

# Edit Publications
GET     /user/publications/:id/edit controllers.UserPublicationController.editPublicationForm(id: Long)
POST    /user/publications/:id/edit controllers.UserPublicationController.updatePublication(id: Long)

# View Publication (Preview)
GET     /user/publications/:id      controllers.UserPublicationController.viewPublication(id: Long)

# Publish Actions
POST    /user/publications/:id/submit   controllers.UserPublicationController.submitForReview(id: Long)
POST    /user/publications/:id/delete   controllers.UserPublicationController.deletePublication(id: Long)

# Notifications
GET     /user/notifications             controllers.UserPublicationController.notifications()
GET     /api/user/notifications/unread   controllers.UserPublicationController.unreadCount()

# Bookmarks
GET     /user/bookmarks                 controllers.UserPublicationController.bookmarks()

# Profile
GET     /user/profile/edit              controllers.UserPublicationController.editProfileForm()
POST    /user/profile/edit              controllers.UserPublicationController.updateProfile()
GET     /profile/:username              controllers.UserPublicationController.publicProfile(username: String)

# Reactions / Comments / Bookmarks
POST    /publications/:id/react         controllers.UserPublicationController.toggleReaction(id: Long)
POST    /publications/:id/comment       controllers.UserPublicationController.addComment(id: Long)
POST    /comments/:id/delete            controllers.UserPublicationController.deleteComment(id: Long)
POST    /publications/:id/bookmark      controllers.UserPublicationController.toggleBookmark(id: Long)

# Badges API
GET     /api/user/badges                controllers.UserPublicationController.userBadges()

# Private Messaging (Reactive / Message-Driven)
GET     /user/messages                  controllers.UserPublicationController.inbox(tab: String ?= "received")
GET     /user/messages/:id              controllers.UserPublicationController.viewMessage(id: Long)
POST    /publications/:id/message       controllers.UserPublicationController.sendMessage(id: Long)
POST    /user/messages/send             controllers.UserPublicationController.sendDirectMessage()
GET     /api/user/messages/unread       controllers.UserPublicationController.unreadMessagesCount()

# API
GET     /api/user/publications      controllers.UserPublicationController.listPublicationsJson()

# ============================================
# ADMIN PUBLICATION MANAGEMENT
# ============================================

# Review Publications
GET     /admin/publications/pending controllers.AdminController.pendingPublications()
GET     /admin/publications         controllers.AdminController.allPublications(status: Option[String] ?= None)
GET     /admin/publications/:id     controllers.AdminController.reviewPublicationDetail(id: Long)

# Approve/Reject
POST    /admin/publications/:id/approve controllers.AdminController.approvePublication(id: Long)
POST    /admin/publications/:id/reject  controllers.AdminController.rejectPublication(id: Long)
POST    /admin/publications/:id/delete  controllers.AdminController.deletePublication(id: Long)
POST    /admin/publications/:id/notes   controllers.AdminController.saveAdminNotes(id: Long)

# Feedback estructurado
POST    /admin/publications/:id/feedback        controllers.AdminController.addFeedback(id: Long)
POST    /admin/feedback/:feedbackId/send         controllers.AdminController.sendFeedbackToUser(feedbackId: Long)
POST    /admin/feedback/:feedbackId/delete       controllers.AdminController.deleteFeedback(feedbackId: Long)

# Newsletter subscribers management
GET     /admin/newsletter           controllers.AdminController.newsletterSubscribers()

# ============================================
# ADMIN MANAGEMENT (Super Admin Only)
# ============================================
GET     /admin/admins               controllers.AdminController.adminManagement()
POST    /admin/admins/:id/approve   controllers.AdminController.approveAdmin(id: Long)
POST    /admin/admins/:id/reject    controllers.AdminController.rejectAdmin(id: Long)
POST    /admin/admins/:id/revoke    controllers.AdminController.revokeAdmin(id: Long)

# API
GET     /api/admin/publications     controllers.AdminController.listAllPublicationsJson()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.versioned(path="/public", file: Asset)
